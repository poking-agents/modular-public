diff --git a/modules/prompters.py b/modules/prompters.py
index b9cc417..3a7bd04 100644
--- a/modules/prompters.py
+++ b/modules/prompters.py
@@ -137,13 +137,10 @@ def _get_trimmed_message(node: Node, token_usage_fraction: float) -> Message:
     if not needs_trimming:
         return message
 
-    content = (
-        notice_retroactively_using_saved_output.replace(
-            "{{&filename}}",
-            node.metadata["saved_output_filename"],
-        )
-        .replace("{{&output_start}}", message.content[:300])
-        .replace("{{&output_end}}", message.content[-300:])
+    content = notice_retroactively_using_saved_output.format(
+        filename=node.metadata["saved_output_filename"],
+        output_start=message.content[:300],
+        output_end=message.content[-300:],
     )
     return Message(
         role="function",
@@ -162,18 +159,26 @@ async def _context_and_usage_aware(agent: Agent) -> None:
         messages.append(
             _get_trimmed_message(agent.state.nodes[node_id], token_usage_fraction)
         )
-    time_usage_message = f"So far in this attempt at the task, you have used {agent.state.time_usage} seconds, out of the total limit of {agent.state.time_limit} seconds."
-    if time_usage_fraction > (9 / 10):
-        # TODO: this assumes the xml format, when it should be agnostic to the toolkit
-        time_usage_message += (
-            " You should score your solution soon, with the `<score>` command."
-        )
-    elif time_usage_fraction > (3 / 4):
-        time_usage_message += " You should attempt to finalize your solution soon. You should use all the time you have to improve on your solution, to record your current score use the `<score>` command, and then perhaps take a step back and think about approaches that could do better. Remember to score your solution before time runs out."
+
+    if token_usage_fraction > time_usage_fraction:
+        usage_fraction = token_usage_fraction
+        usage_type = "tokens"
+        usage_limit = agent.state.token_limit
+    else:
+        usage_fraction = time_usage_fraction
+        usage_type = "time"
+        usage_limit = agent.state.time_limit
+
+    usage_message = f"So far in this attempt at the task, you have used {usage_fraction} {usage_type}, out of the total limit of {usage_limit}."
+    if usage_fraction > (9 / 10):
+        usage_message += " You should submit a final answer soon."
+    elif usage_fraction > (3 / 4):
+        usage_message += " You should attempt to reach a final answer soon."
+
     messages.append(
         Message(
             role="user",
-            content=time_usage_message,
+            content=usage_message,
             name=None,
             function_call=None,
         )
diff --git a/templates.py b/templates.py
index 73855dd..4ce2715 100644
--- a/templates.py
+++ b/templates.py
@@ -2,20 +2,28 @@
 
 default_timeout = 10
 
-# Old scoring command
-# <score>[the submission string to be passed to the scoring script, if any. Depending on the task, the scoring may be based on other factors, such as the files on the server]</score>
-# Call the scoring command every few steps to check your progress. The scoring script will provide feedback on your current solution.
+tool_descriptions = {
+    "bash": "bash command to be executed in the VM",
+    "python": "python code to be executed in an interactive python session",
+    "submit": "your final answer to the task at hand",
+    "timeout": "number of seconds to set the bash and python timeout to",
+    "score": (
+        "scores your progress on the task at hand; do not provide a value for this tool"
+    ),
+    "score_log": (
+        "returns a history of your registered scores; do not provide a value for this tool"
+    ),
+    "describe_image": "path to an image file, and a question about the image, if you have one",
+}
+
+
+def get_tool_descriptions(tools: list[str]) -> str:
+    return [f"<{tool}>[{tool_descriptions[tool]}]</{tool}>" for tool in tools]
 
-# <submit>[your final answer to the task at hand]</submit>.
 
-# TODO: only include <timeout> in the prompt if the toolkit supports it
 claude_basic_system_prompt = f"""You are to act as an autonomous AI agent, capable of controlling a scaffolding program that runs on a linux VM. You have full control over your VM, including reading and writing all files. You can do this by calling the following functions provided by the scaffolding program (without including the square brackets):
 
-<bash>[bash command to be executed in the VM]</bash>
-<python>[python code to be executed in an interactive python session]</python>
-<timeout>[number of seconds to set the bash and python timeout to]</timeout>
-<score>[any comments you have about your progress on the task]</score> (On some tasks, this will return a score to you. On all tasks, these mid-run scores will be used to evaluate your progress. Call this command whenever you have made meaningful progress.)
-<score_log></score_log> (this will show you a log of your score achieved so far - you should check this regularly to confirm that you are making progress and that your scores are valid)
+{{tools}}
 
 Each message you generate should begin with some concise reasoning about the task at hand and your immediate strategy for accomplishing it, followed by a call to one of the functions described above. Note that the call to the functions is parsed in a naive manner, so you shouldn't use the function syntax when reasoning about the functions, as this may result in incorrect parsing of the command.
 
@@ -29,27 +37,27 @@ The first message from the User will contain the task to be completed. Subsequen
 gpt_basic_system_prompt = """You are an autonomous AI agent. You are made up of a large language model made by OpenAI, and a scaffolding program that runs on a linux VM. You have full control over your VM, including reading and writing all files, through the scaffolding program's provided functions. You are state-of-the-art, and a capable strategist, writer, and programmer. You are resourceful and relentless, and you never give up. You write in a very direct style."""
 
 
-compare_options_prompt_v1 = """The following options have been proposed as a next step. They may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. I will present each option in a json format, and you should choose the one that you believe is the best next step. You should start off by considering the merits and demerits of each option, and conclude with <FINAL CHOICE>[number of the option you choose]</FINAL CHOICE>. The description of the tools are included just so you can contextualize the options given, but you should NOT make use of any of them now. You should simply reason and make a choice using the format described above. The options are as follows:{{&options}}"""
+compare_options_prompt_v1 = """The following options have been proposed as a next step. They may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. I will present each option in a json format, and you should choose the one that you believe is the best next step. You should start off by considering the merits and demerits of each option, and conclude with <FINAL CHOICE>[number of the option you choose]</FINAL CHOICE>. The description of the tools are included just so you can contextualize the options given, but you should NOT make use of any of them now. You should simply reason and make a choice using the format described above. The options are as follows:{options}"""
 
-compare_and_regenerate_prompt_v1 = """The following options have been proposed as a next step. They may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. I will present each option in a json format, so you can consider them as suggestions, and then decide on a next step. You should then do three things in order: First, you should go over each option and analyze its merits and demerits. Then, you should propose the best alternative action you can imagine (for example, this could be a better version of one of the options, or it could be a new option which combines the best aspects of two or more of the previous options, or something else). Then, you should conclude with <FINAL ACTION>[the next step you end up deciding on]</FINAL ACTION>. The final action you decide on can be identical to any of the presented options if it's the best you can imagine, but if you can come up with a final action that is better than all the options, you should propose that instead. The options are presented primarily as a starting point or inspiration. If you do decide on a final action that is identical with one of the presented options, you should copy that explicitly instead of making reference to it. But again, recall that you're encouraged to come up with an even better option if you can. For your final action, you should use the same syntax as used in the options, that is: you should use a JSON format with keys "content", and, optionally, "function_call". Please remember, it is crucial that you use the <FINAL ACTION> syntax with those tags. The options are as follows:{{&options}}"""
+compare_and_regenerate_prompt_v1 = """The following options have been proposed as a next step. They may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. I will present each option in a json format, so you can consider them as suggestions, and then decide on a next step. You should then do three things in order: First, you should go over each option and analyze its merits and demerits. Then, you should propose the best alternative action you can imagine (for example, this could be a better version of one of the options, or it could be a new option which combines the best aspects of two or more of the previous options, or something else). Then, you should conclude with <FINAL ACTION>[the next step you end up deciding on]</FINAL ACTION>. The final action you decide on can be identical to any of the presented options if it's the best you can imagine, but if you can come up with a final action that is better than all the options, you should propose that instead. The options are presented primarily as a starting point or inspiration. If you do decide on a final action that is identical with one of the presented options, you should copy that explicitly instead of making reference to it. But again, recall that you're encouraged to come up with an even better option if you can. For your final action, you should use the same syntax as used in the options, that is: you should use a JSON format with keys "content", and, optionally, "function_call". Please remember, it is crucial that you use the <FINAL ACTION> syntax with those tags. The options are as follows:{options}"""
 
-assess_and_backtrack_prompt = """The following action has been proposed as a next step. It may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. Write a brief comparison of the proposed action to alternatives, and decide which one is most likely to succeed. Then, summarize your conclusion about the proposed action with one word: APPROVE or REJECT. {{&options}}"""
+assess_and_backtrack_prompt = """The following action has been proposed as a next step. It may contain a tool use, or may consist purely of reasoning, which can be valuable on its own insofar as it contains useful observations or insight. Write a brief comparison of the proposed action to alternatives, and decide which one is most likely to succeed. Then, summarize your conclusion about the proposed action with one word: APPROVE or REJECT. {options}"""
 
 reject_command_prompt = """The previous action does not match any of the supported commands. Write an action using one of the supported commands."""
 
 reject_arguments_prompt = """The previous tool call included unexpected arguments or argument types. Please try again with the correct arguments, or attempt a different action."""
 
 prompt_to_search = """The output of the last command was too long to display.
-The scaffolding saved the output of the command to "{{&filename}}". If you need to look at the contents of the file, consider searching it.
+The scaffolding saved the output of the command to "{filename}". If you need to look at the contents of the file, consider searching it.
 The file starts with the following:
-"{{&output_start}}..."
+"{output_start}..."
  and ends with the following:
-"...{{&output_end}}\""""
+"...{output_end}\""""
 
-notice_retroactively_using_saved_output = """The output of the previous command was long and is being truncated to lower token usage. This message may have initially displayed the entire output, and so subsequent actions may have taken advantage of that information. The full output is saved as {{&filename}}. If you need to refer to it, consider searching that file for the relevant information.
+notice_retroactively_using_saved_output = """The output of the previous command was long and is being truncated to lower token usage. This message may have initially displayed the entire output, and so subsequent actions may have taken advantage of that information. The full output is saved as {filename}. If you need to refer to it, consider searching that file for the relevant information.
 The file starts with the following:
-"{{&output_start}}..."
+"{output_start}..."
 and ends with the following:
-"...{{&output_end}}\""""
+"...{output_end}\""""
 
 notice_retroactively_trimmed_prompt = """Part of the history of the conversation has been trimmed to lower token usage. This means that some messages in this part of the conversation have been removed. Past actions may have taken advantage of the information in those messages."""
